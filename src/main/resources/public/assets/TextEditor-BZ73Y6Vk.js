import{_,r as a,e as g,c as B,w as d,o as u,f as T,a as s,v as F,b as S,F as E,d as I,t as A}from"./index-C4bMOnsP.js";import{C as U}from"./CommonLayout-CoRen2g5.js";const L={class:"menuBar"},R=["onClick"],P={__name:"TextEditor",setup(H){const m=["임시저장","파일로 저장","파일로 불러오기","초기화"],n=a(""),r=a(""),c=a(""),p=()=>{document.cookie=`textContent=${encodeURIComponent(n.value)}; path=/; max-age=3600`,alert("내용이 임시 저장되었습니다.")},h=()=>{const e=new Blob([n.value],{type:"text/plain"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="text-editor.txt",t.click()},v=async()=>{const e=await l(c.value),t={id:r.value,password:e,content:n.value};console.log("Server save request:",t)},l=async e=>{const o=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",o);return Array.from(new Uint8Array(i)).map(C=>C.toString(16).padStart(2,"0")).join("")},f=e=>{const t=e.target.files[0],o=new FileReader;o.onload=()=>{n.value=o.result},o.readAsText(t)},x=async()=>{const e=await l(c.value),t={id:r.value,password:e};console.log("Server load request:",t)},w=e=>{e==="임시저장"?p():e==="파일로 저장"?h():e==="파일로 불러오기"?document.getElementById("fileInput").click():e==="서버에 저장"?v():e==="서버에서 불러오기"?x():e=="초기화"&&y()},y=()=>{document.cookie="textContent=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",n.value=""},k=()=>{const e=document.cookie.match(/(?:^|; )textContent=([^;]*)/);e&&(n.value=decodeURIComponent(e[1]))};return g(()=>{k()}),(e,t)=>(u(),B(U,{direction:"column"},{menuBar:d(()=>[s("div",L,[t[1]||(t[1]=s("h1",null,"텍스트 에디터",-1)),(u(),S(E,null,I(m,o=>s("button",{key:o,onClick:i=>w(o)},A(o),9,R)),64)),s("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:f},null,32)])]),mainView:d(()=>[T(s("textarea",{class:"full-textarea","onUpdate:modelValue":t[0]||(t[0]=o=>n.value=o)},null,512),[[F,n.value]])]),_:1}))}},q=_(P,[["__scopeId","data-v-aef3159e"]]);export{q as default};
